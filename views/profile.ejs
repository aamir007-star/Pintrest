<% include ./partials/header.ejs %>

<div class="profile w-full min-h-screen bg-zinc-800 text-white flex justify-center flex-col p-3 sm:p-5">

    <form id="uploadform" hidden action="/fileupload" name="uploadform" method="post" enctype="multipart/form-data">
        <input type="file" id="uploadfile" name="avatar" />
    </form>

    <div class="profiledetailes flex flex-col items-center sm:items-center">
        <div class="relative">

            <!-- profile picture -->
            <div class="w-24 h-24 sm:w-28 sm:h-28 bg-zinc-300 rounded-full overflow-hidden">
                <img class="w-full h-full object-cover" src="/images/uploads/<%=user.profileImage%>">
            </div>

            <!-- icon image -->
            <span id="uploadicon" class="w-6 h-6 sm:w-7 sm:h-7 bg-zinc-200 rounded-full absolute bottom-1 right-[2px] flex justify-center items-center">
                <i class="text-zinc-800 ri-pencil-fill"></i>
            </span>
        </div>

        <h1 class="text-2xl capitalize mt-2"><%= user.username %></h1>
        <h3 class="text-xs -mt-1"><%= user.email %></h3>
        <a class="px-3 rounded-full bg-red-600 mt-1 font-bold" href="/add">add new post</a>
    </div>

    <!------------ card section ---------->

    <div class="cards mt-3 flex flex-wrap w-full h-full p-5 gap-3 sm:flex-row flex-col">

        <% user.posts.forEach(function(elem){ %>
             <a href="/show/<%= elem._id %>">
            <div>
                <div class="card max-w-[208px] w-full h-48 bg-zinc-300 rounded-md overflow-hidden flex items-center justify-center">
                    <img class="w-full h-full object-cover object-center" src="/images/uploads/<%= elem.image %>" alt="<%= elem.title %>">
                </div>
                    <h3 class="text-xs mt-1 tracking-tight truncate"><%= elem.title %></h3>
                <a href="/delete/<%= elem._id %>" class="block w-8 text-center text-[12px] px-1 -mt-[1px] rounded-md bg-red-600">Delete</a>
            </div>
            </a>
        <% }) %>

    </div>
</div>

<script src="/javascripts/profile.js"></script>

<% include ./partials/footer.ejs %>
